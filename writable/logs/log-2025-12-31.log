DEBUG - 2025-12-31 03:36:42 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:36:54 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:36:55 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:37:05 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:44:22 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:45:15 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:45:20 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:45:35 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:50:07 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:57:13 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 03:57:31 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:27:19 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:29:56 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:32:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:33:10 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:34:52 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:35:03 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:35:35 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:35:45 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:35:45 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:35:49 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:37:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:38:58 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:40:10 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:40:14 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:49:38 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:50:23 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:50:45 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:58:47 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:59:40 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 04:59:42 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:00:01 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:01:24 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:04:09 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:06:28 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:08:37 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:10:34 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:11:18 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:12:15 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:13:41 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:14:36 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:14:56 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:15:22 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:16:17 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:16:26 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:16:50 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:17:27 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:17:50 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:44:48 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:56:32 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 05:57:20 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:01:07 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:02:29 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:06:25 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:06:31 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:17:24 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:22:19 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:25:04 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:34:53 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:35:24 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:37:47 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:43:07 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:43:10 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:43:29 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 06:43:50 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 07:55:28 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 07:55:28 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 07:55:28 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 07:55:28 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:04:44 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:04:44 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:04:44 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:04:44 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:07:02 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:02 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:02 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:02 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:07:03 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:03 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:03 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:03 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:07:04 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:04 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:04 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:04 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:07:19 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:19 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:19 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:19 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:07:20 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:20 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:20 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:20 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 08:07:23 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 08:07:27 --> mysqli_sql_exception: Unknown column 'tax_paid' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:07:27 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:27 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:07:27 --> [Caused by] mysqli_sql_exception: Unknown column 'tax_paid' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(tax_paid) AS total_tax
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:08:10 --> mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:08:10 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:10 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:10 --> [Caused by] mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:08:11 --> mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:08:11 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:11 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:11 --> [Caused by] mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
ERROR - 2025-12-31 08:08:12 --> mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list' in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT \r\n     ...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT \r\n     ...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT \r\n     ...')
#3 C:\laragon\www\pharmacy-project\app\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT \r\n     ...')
#4 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
#5 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
#6 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#7 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#8 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#9 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#10 {main}
CRITICAL - 2025-12-31 08:08:12 --> CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
[Method: GET, Route: salereturnlist]
in SYSTEMPATH\Database\BaseConnection.php on line 684.
 1 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:12 --> [Caused by] CodeIgniter\Database\Exceptions\DatabaseException: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 332.
 1 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 2 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 5 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 6 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 7 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 8 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 9 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:08:12 --> [Caused by] mysqli_sql_exception: Unknown column 'sd.total_tax' in 'field list'
in SYSTEMPATH\Database\MySQLi\Connection.php on line 327.
 1 SYSTEMPATH\Database\MySQLi\Connection.php(327): mysqli->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ', 0)
 2 SYSTEMPATH\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 3 SYSTEMPATH\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 4 APPPATH\Controllers\salereturnlist.php(63): CodeIgniter\Database\BaseConnection->query(' SELECT 
                    s.sales_invoice,
                    s.sales_date,
                    sd.total_sale,
                    sd.total_tax,
                    s.discountOnTotalPrice,
                    s.vatOnTotalPrice,
                    s.paid_amount,
                    IFNULL(cd.customer_due, 0) AS customer_due,
                    IFNULL(cd.total_due_paid, 0) AS due_paid_amount,
                    (s.paid_amount + IFNULL(cd.total_due_paid, 0)) AS total_paid,
                    s.due_amount,
                    CASE 
                        WHEN s.customer_type REGEXP \'^[0-9]+$\' THEN c.cus_first_name
                        ELSE s.customer_type
                    END AS customer_name,
                    CASE
                        WHEN s.customer_type = \'Walk-In-Customer\' THEN \'Fully Paid\'
                        WHEN IFNULL(cd.customer_due, 0) = 0 THEN \'Fully Paid\'
                        ELSE \'Partially Paid\'
                    END AS payment_status
                FROM sales s
                JOIN (
                    SELECT 
                        sales_details_invoice, 
                        SUM(total_sale_price) AS total_sale, 
                        SUM(productwiseVatPercnt) AS productwiseVatPercnt
                    FROM sales_details
                    GROUP BY sales_details_invoice
                ) sd ON s.sales_invoice = sd.sales_details_invoice
                LEFT JOIN (
                    SELECT 
                        due_invoice_no, 
                        SUM(due_amount - due_paid_amount) AS customer_due,
                        SUM(due_paid_amount) AS total_due_paid
                    FROM customer_due
                    GROUP BY due_invoice_no
                ) cd ON s.sales_invoice = cd.due_invoice_no
                LEFT JOIN customer c ON c.customer_id = s.customer_type AND s.customer_type REGEXP \'^[0-9]+\'
            ')
 5 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 6 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 7 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 8 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 9 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
10 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
CRITICAL - 2025-12-31 08:09:35 --> ErrorException: Undefined array key "total_tax"
[Method: GET, Route: salereturnlist]
in APPPATH\Views\report\sales_return_list.php on line 47.
 1 APPPATH\Views\report\sales_return_list.php(47): CodeIgniter\Debug\Exceptions->errorHandler(2, 'Undefined array key "total_tax"', 'C:\\laragon\\www\\pharmacy-project\\app\\Views\\report\\sales_return_list.php', 47)
 2 SYSTEMPATH\View\View.php(226): include('C:\\laragon\\www\\pharmacy-project\\app\\Views\\report\\sales_return_list.php')
 3 SYSTEMPATH\View\View.php(229): CodeIgniter\View\View->CodeIgniter\View\{closure}()
 4 SYSTEMPATH\Common.php(1167): CodeIgniter\View\View->render('report/sales_return_list', [], true)
 5 APPPATH\Controllers\salereturnlist.php(65): view('report/sales_return_list', [...])
 6 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\salereturnlist->index()
 7 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\salereturnlist))
 8 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 9 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
10 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
11 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 08:09:55 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:10:55 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:12:53 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:13:02 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:14:43 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:15:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:30:40 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:32:40 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:32:43 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:33:09 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
CRITICAL - 2025-12-31 08:33:09 --> ErrorException: Undefined array key "discount_percent"
[Method: POST, Route: pos/sale]
in APPPATH\Controllers\pos.php on line 116.
 1 APPPATH\Controllers\pos.php(116): CodeIgniter\Debug\Exceptions->errorHandler(2, 'Undefined array key "discount_percent"', 'C:\\laragon\\www\\pharmacy-project\\app\\Controllers\\pos.php', 116)
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\Pos->sale()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 08:33:29 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:33:38 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
CRITICAL - 2025-12-31 08:33:38 --> ErrorException: Undefined array key "vat_input"
[Method: POST, Route: pos/sale]
in APPPATH\Controllers\pos.php on line 115.
 1 APPPATH\Controllers\pos.php(115): CodeIgniter\Debug\Exceptions->errorHandler(2, 'Undefined array key "vat_input"', 'C:\\laragon\\www\\pharmacy-project\\app\\Controllers\\pos.php', 115)
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\Pos->sale()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 08:33:55 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
CRITICAL - 2025-12-31 08:33:55 --> ErrorException: Undefined array key "vat_input"
[Method: POST, Route: pos/sale]
in APPPATH\Controllers\pos.php on line 115.
 1 APPPATH\Controllers\pos.php(115): CodeIgniter\Debug\Exceptions->errorHandler(2, 'Undefined array key "vat_input"', 'C:\\laragon\\www\\pharmacy-project\\app\\Controllers\\pos.php', 115)
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\Pos->sale()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 08:35:46 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:36:26 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:42:37 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:43:20 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:43:39 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:52:05 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:52:07 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:52:40 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:55:41 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:55:41 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:56:23 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:57:04 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 08:57:27 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 09:14:59 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 09:15:36 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 10:42:48 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 10:43:26 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 10:59:44 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 10:59:44 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:00:44 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:01:47 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:05:21 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:06:00 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:07:19 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:09:27 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:10:01 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:18:54 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:18:54 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 11:19:12 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 14:45:02 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 14:48:24 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 14:48:46 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
CRITICAL - 2025-12-31 14:48:46 --> ErrorException: Undefined array key "buying_unit_price"
[Method: POST, Route: pos/sale]
in APPPATH\Controllers\pos.php on line 138.
 1 APPPATH\Controllers\pos.php(138): CodeIgniter\Debug\Exceptions->errorHandler(2, 'Undefined array key "buying_unit_price"', 'C:\\laragon\\www\\pharmacy-project\\app\\Controllers\\pos.php', 138)
 2 SYSTEMPATH\CodeIgniter.php(933): App\Controllers\Pos->sale()
 3 SYSTEMPATH\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
 4 SYSTEMPATH\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(null, Object(Config\Cache), false)
 5 SYSTEMPATH\Boot.php(363): CodeIgniter\CodeIgniter->run()
 6 SYSTEMPATH\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
 7 FCPATH\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
DEBUG - 2025-12-31 14:49:39 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 14:55:21 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:04:30 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:06:37 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:09:31 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:09:41 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:10:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:12:15 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:12:44 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:14:48 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:15:31 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:16:03 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:20:38 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:21:13 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 15:21:13 --> mysqli_sql_exception: Column 'seller_id' cannot be null in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query('INSERT INTO `sa...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `sa...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `sa...')
#3 C:\laragon\www\pharmacy-project\system\Database\BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `sa...', Array, false)
#4 C:\laragon\www\pharmacy-project\system\Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 C:\laragon\www\pharmacy-project\system\BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 C:\laragon\www\pharmacy-project\system\Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 C:\laragon\www\pharmacy-project\app\Controllers\pos.php(125): CodeIgniter\Model->insert(Array)
#8 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\Pos->sale()
#9 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
#10 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
DEBUG - 2025-12-31 15:21:19 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:23:38 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:23:47 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 15:23:47 --> mysqli_sql_exception: Column 'seller_id' cannot be null in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query('INSERT INTO `sa...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `sa...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `sa...')
#3 C:\laragon\www\pharmacy-project\system\Database\BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `sa...', Array, false)
#4 C:\laragon\www\pharmacy-project\system\Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 C:\laragon\www\pharmacy-project\system\BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 C:\laragon\www\pharmacy-project\system\Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 C:\laragon\www\pharmacy-project\app\Controllers\pos.php(125): CodeIgniter\Model->insert(Array)
#8 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\Pos->sale()
#9 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
#10 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
DEBUG - 2025-12-31 15:23:47 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:23:59 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 15:23:59 --> mysqli_sql_exception: Column 'seller_id' cannot be null in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query('INSERT INTO `sa...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `sa...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `sa...')
#3 C:\laragon\www\pharmacy-project\system\Database\BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `sa...', Array, false)
#4 C:\laragon\www\pharmacy-project\system\Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 C:\laragon\www\pharmacy-project\system\BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 C:\laragon\www\pharmacy-project\system\Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 C:\laragon\www\pharmacy-project\app\Controllers\pos.php(125): CodeIgniter\Model->insert(Array)
#8 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\Pos->sale()
#9 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
#10 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
DEBUG - 2025-12-31 15:23:59 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:24:58 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 15:24:58 --> mysqli_sql_exception: Column 'seller_id' cannot be null in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query('INSERT INTO `sa...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `sa...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `sa...')
#3 C:\laragon\www\pharmacy-project\system\Database\BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `sa...', Array, false)
#4 C:\laragon\www\pharmacy-project\system\Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 C:\laragon\www\pharmacy-project\system\BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 C:\laragon\www\pharmacy-project\system\Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 C:\laragon\www\pharmacy-project\app\Controllers\pos.php(125): CodeIgniter\Model->insert(Array)
#8 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\Pos->sale()
#9 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
#10 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
DEBUG - 2025-12-31 15:24:59 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:34:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:34:38 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
ERROR - 2025-12-31 15:34:38 --> mysqli_sql_exception: Column 'seller_id' cannot be null in C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php:327
Stack trace:
#0 C:\laragon\www\pharmacy-project\system\Database\MySQLi\Connection.php(327): mysqli->query('INSERT INTO `sa...', 0)
#1 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(729): CodeIgniter\Database\MySQLi\Connection->execute('INSERT INTO `sa...')
#2 C:\laragon\www\pharmacy-project\system\Database\BaseConnection.php(646): CodeIgniter\Database\BaseConnection->simpleQuery('INSERT INTO `sa...')
#3 C:\laragon\www\pharmacy-project\system\Database\BaseBuilder.php(2345): CodeIgniter\Database\BaseConnection->query('INSERT INTO `sa...', Array, false)
#4 C:\laragon\www\pharmacy-project\system\Model.php(394): CodeIgniter\Database\BaseBuilder->insert()
#5 C:\laragon\www\pharmacy-project\system\BaseModel.php(838): CodeIgniter\Model->doInsert(Array)
#6 C:\laragon\www\pharmacy-project\system\Model.php(797): CodeIgniter\BaseModel->insert(Array, true)
#7 C:\laragon\www\pharmacy-project\app\Controllers\pos.php(120): CodeIgniter\Model->insert(Array)
#8 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(933): App\Controllers\Pos->sale()
#9 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(507): CodeIgniter\CodeIgniter->runController(Object(App\Controllers\Pos))
#10 C:\laragon\www\pharmacy-project\system\CodeIgniter.php(354): CodeIgniter\CodeIgniter->handleRequest(NULL, Object(Config\Cache), false)
#11 C:\laragon\www\pharmacy-project\system\Boot.php(363): CodeIgniter\CodeIgniter->run()
#12 C:\laragon\www\pharmacy-project\system\Boot.php(68): CodeIgniter\Boot::runCodeIgniter(Object(CodeIgniter\CodeIgniter))
#13 C:\laragon\www\pharmacy-project\index.php(59): CodeIgniter\Boot::bootWeb(Object(Config\Paths))
#14 {main}
DEBUG - 2025-12-31 15:35:28 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:37:08 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:37:16 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:37:21 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:43:44 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:43:51 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:43:56 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:44:33 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:44:39 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
DEBUG - 2025-12-31 15:44:40 --> Session: Class initialized using 'CodeIgniter\Session\Handlers\FileHandler' driver.
